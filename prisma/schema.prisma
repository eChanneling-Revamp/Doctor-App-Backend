generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Appointment {
  id            Int            @id @default(autoincrement())
  patientName   String
  patientEmail  String? // ✅ Needed for PDF
  refNo         String? // ✅ Needed for PDF
  status        String         @default("Active")
  date          DateTime
  prescriptions Prescription[]
}

model Prescription {
  id            Int               @id @default(autoincrement())
  appointmentId Int
  appointment   Appointment       @relation(fields: [appointmentId], references: [id])
  createdAt     DateTime          @default(now())
  medicines     PrescriptionMed[] // ✅ Relation to medicines
}

model PrescriptionMed {
  id             Int          @id @default(autoincrement())
  prescriptionId Int
  prescription   Prescription @relation(fields: [prescriptionId], references: [id])
  medicineName   String
  dosage         String?
  frequency      String?
  duration       String?
  specialNote    String? 
  isFavorite     Boolean      @default(false) 
}

model Medicine {
  id            Int      @id @default(autoincrement())
  name          String
  defaultDosage String?
  defaultFreq   String?
  defaultDur    String?
  createdAt     DateTime @default(now())
}
